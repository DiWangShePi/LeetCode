# 36. Valid Sudoku

### 题目描述

给定一个9✖9的数独版，检测这个板子是否合法。只需要考虑填入的数字，需要遵守的规则如下：

1. 每一行中，数字1到9不能重复。
2. 每一列中，数字1到9不能重复。
3. 每一个三✖三的小格中，数字1到9不能重复。（0-2,3-5,6-8）

**示例：**

```c++
Input: board = 
[["5","3",".",".","7",".",".",".","."]
,["6",".",".","1","9","5",".",".","."]
,[".","9","8",".",".",".",".","6","."]
,["8",".",".",".","6",".",".",".","3"]
,["4",".",".","8",".","3",".",".","1"]
,["7",".",".",".","2",".",".",".","6"]
,[".","6",".",".",".",".","2","8","."]
,[".",".",".","4","1","9",".",".","5"]
,[".",".",".",".","8",".",".","7","9"]]
Output: true
```

```c++
Input: board = 
[["8","3",".",".","7",".",".",".","."]
,["6",".",".","1","9","5",".",".","."]
,[".","9","8",".",".",".",".","6","."]
,["8",".",".",".","6",".",".",".","3"]
,["4",".",".","8",".","3",".",".","1"]
,["7",".",".",".","2",".",".",".","6"]
,[".","6",".",".",".",".","2","8","."]
,[".",".",".","4","1","9",".",".","5"]
,[".",".",".",".","8",".",".","7","9"]]
Output: false
Explanation: Same as Example 1, except with the 5 in the top left corner being modified to 8. Since there are two 8's in the top left 3x3 sub-box, it is invalid.
```

### 题目解析

我们可以采用遍历的方式，每一次遍历一行或一列或一个小方格。检测1-9是否重复出现。任意一次不满足即可返回false。全部通过返回true。

但这似乎不够优雅，虽然时间复杂度是O(n)。我们可以为每个行或列或小方格维护一个集合，每获取一个值便在相应的集合中检查是否已经出现过这个值。
若每出现即为合法， 反之即为非法。我们只需要一次遍历，即可完成检查。

### 代码实现

```c++
class Solution {
public:
    bool isValidSudoku(vector<vector<char>>& board) {
        unordered_set<char> rows[9];
        unordered_set<char> cols[9];
        unordered_set<char> boxes[9];

        for (int r = 0; r < 9; ++r) {
            for (int c = 0; c < 9; ++c) {
                if (board[r][c] == '.') {
                    continue;
                }

                char value = board[r][c];
                int boxIndex = (r / 3) * 3 + (c / 3);

                if (rows[r].count(value) || cols[c].count(value) || boxes[boxIndex].count(value)) {
                    return false;
                }

                rows[r].insert(value);
                cols[c].insert(value);
                boxes[boxIndex].insert(value);
            }
        }

        return true;        
    }
};
```

